:_mod-docs-content-type: ASSEMBLY
[id="microshift-4-13-release-notes"]
= {product-title} {product-version} release notes
include::_attributes/attributes-microshift.adoc[]
:context: release-notes

toc::[]

{product-title} provides developers and IT organizations with small-form-factor and edge computing, delivered as an application that customers can deploy on top of their managed {op-system-base-full} devices at the edge. Built on {OCP} and Kubernetes, {product-title} provides an efficient way to operate single-node clusters in low-resource edge environments.

{product-title} is designed to make control plane restarts economical and be lifecycle-managed as a single unit by the operating system. Updates, roll-backs, and configuration changes consist of simply staging another version in parallel and then - without relying on a network - flipping to and from that version and restarting.

[id="microshift-4-13-about-this-release"]
== About this release

The {product-title} is Technology Preview only. Features and known issues that pertain to {product-title} {ocp-version} are included in this topic. This Technology Preview software is not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using {product-title} in production. Technology Preview provides early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.

For more information about the support scope of Red Hat Technology Preview features, read link:https://access.redhat.com/support/offerings/techpreview/[Technology Preview Features Support Scope].

[IMPORTANT]
====
Red Hat does not support an update path from the Technology Preview version to later versions of {product-title}. A new installation is necessary.
====

[id="microshift-4-13-new-features-and-enhancements"]
== New features and enhancements

This release adds improvements related to the following components and concepts.

[id="microshift-4-13-rhel-edge"]
=== {op-system-ostree-first} {op-system-version}
* {product-title} runs on {op-system-ostree} version {op-system-version} or later.

// Some details of the next note are adapted from https://kubernetes.io/blog/2022/08/31/cgroupv2-ga-1-25/
* {product-title} uses crun and Control Group v2 (cgroup v2). {OCP} {ocp-version} defaults to Control Group v1. The divergence of control group versions is not anticipated to have a noticeable behavior difference on most workloads. If workloads rely on the cgroup file system layout, they may need to be updated to be compatible with cgroup v2.

** If you run third-party monitoring and security agents that depend on the cgroup file system, update the agents to versions that support cgroup v2.
** If you run cAdvisor as a standalone DaemonSet for monitoring pods and containers, update it to v0.43.0 or later.
** If you deploy Java applications with the JDK, ensure you are using JDK 11.0.16 and later or JDK 15 and later, which fully support cgroup v2.

[id="microshift-4-13-installation"]
=== Installation
This release includes integration with the greenboot health check framework. Greenboot assesses system health and automates a rollback to the last healthy state in the event of software trouble. You can add the optional greenboot RPM to your installation. For more information, read the xref:../microshift_install/microshift-greenboot.adoc#microshift-greenboot[Greenboot documentation].

[id="microshift-4-13-support"]
=== Support

[id="microshift-4-13-sos-reports"]
==== {product-title} sos reports
With this release you can run an `sos` report to collect troubleshooting information about a host. The report generates a detailed report with data from all enabled plugins and different components and applications in a system.

For more information, read xref:../microshift_support/microshift-sos-report.adoc#about-microshift-sos-reports_microshift-sos-report[About MicroShift sos reports].

[id="microshift-4-13-etcd"]
==== {product-title} etcd

With this release, {product-title} etcd is run as a separate process whose lifecycle is managed automatically by {product-title}. You can gather `journalctl` logs to observe and debug the etcd server logs.

For more information, read xref:../microshift_support/microshift-etcd.adoc#microshift-observe-debug-etcd-server_microshift-etcd[Observe and debug the MicroShift etcd server].

[id="microshift-4-13-networking"]
=== Networking

[id="microshift-4-13-load-balancer"]
==== Deploying network load balancers on {product-title}

{product-title} now offers a built-in implementation of network load balancers. For more details, read xref:../microshift_networking/microshift-networking.adoc#microshift-deploying-a-load-balancer_microshift-networking[Deploying a TCP load balancer on a workload].

[id="microshift-4-13-storage"]
=== Storage

[id="microshift-4-13-lvms-system-requirements"]
==== LVMS system requirements

{product-title} configures LVMS dynamically based on the Volume Groups present. For more details, read the xref:../microshift_storage/microshift-storage-plugin-overview.adoc#lvms-volume-group-name_microshift-storage-plugin-overview[LVMS system requirements] section of this documentation.

[id="microshift-4-13-bug-fixes"]
== Bug fixes

* Previously, {product-title} generated `kubeconfig` files using certificate authorities (CA) shared by all embedded components. With this update, the CAs and certificates are reconfigured to ensure the `kubeconfig` files are independent. (link:https://issues.redhat.com/browse/OCPBUGS-10223[*OCPBUGS#10223*])

* Previously, the `systemd-resolved` configuration was used by kubelet as an alternative DNS resolver, but the DNS Corefile configuration did not use the same `systemd-resolved` configuration. With this update, {product-title} uses the network name resolution provided by `systemd-resolved` for both kubelet and cluster DNS when the `systemd-resolved.service` is enabled. (link:https://issues.redhat.com/browse/OCPBUGS-6786[*OCPBUGS-6786*])

[id="microshift-4-13-known-issues"]
== Known issues

* OVN-Kubernetes sets up an iptable chain in the network address translation (NAT) table to handle incoming traffic to the NodePort service. When the NodePort service is not reachable or the connection is refused, check the iptable rules on the host to make sure the relevant rules are properly inserted.
+
. View the iptable rules for the NodePort service by running the following command:
+
[source, terminal]
----
$ sudo iptables-save | grep NODEPORT
----
+
.Example output
[source, terminal]
----
-A OUTPUT -j OVN-KUBE-NODEPORT
-A OVN-KUBE-NODEPORT -p tcp -m addrtype --dst-type LOCAL -m tcp --dport 30326 -j DNAT --to-destination 10.43.95.170:80
----
OVN-Kubernetes configures the `OVN-KUBE-NODEPORT` iptable chain in the NAT table to match the packet with the destination port and Destination Network Address Translates (DNATs) the packet to the `clusterIP` service. The packet is then routed to the OVN network through the gateway bridge `br-ex` using routing rules on the host.
+
. View the hosts routing table by running the following command:
+
[source, terminal]
----
$ ip route
----
+
.Example output
[source, terminal]
----
10.43.0.0/16 via 192.168.122.1 dev br-ex mtu 1400
----
This routing rule matches the Kubernetes service IP address range and forwards the packet to the gateway bridge `br-ex`. You must enable `ip_forward` on the host. After the packet is forwarded to the OVS bridge `br-ex`, it is handled by OpenFlow rules in OVS. OpenFlow then steers the packet to the OVN network and eventually to the pod.

[id="microshift-4-13-asynchronous-errata-updates"]
== Asynchronous errata updates

Security, bug fix, and enhancement updates for {product-title} {product-version} are released as asynchronous errata through the Red Hat Network. All {product-title} {product-version} errata are https://access.redhat.com/downloads/content/290/[available on the Red Hat Customer Portal]. Read the https://access.redhat.com/support/policy/updates/openshift[{product-title} Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account settings for Red Hat Subscription Management (RHSM). When errata notifications are enabled, you are notified through email whenever new errata relevant to your registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming {product-title} entitlements for {product-title} errata notification emails to generate.
====

This section will continue to be updated over time to provide notes on enhancements and bug fixes for future asynchronous errata releases of {product-title} {ocp-version}. Versioned asynchronous releases, for example with the form {product-title} {ocp-version}.z, will be detailed in subsections. In addition, releases in which the errata text cannot fit in the space provided by the advisory will be detailed in subsections that follow.

[id="microshift-4-13-0-dp"]
=== RHSA-2023:1329 - {product-title} 4.13.0 bug fix and security update

Issued: 2023-05-17

{product-title} release 4.13.0 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHSA-2023:1329[RHSA-2023:1329] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:1326[RHSA-2023:1326] advisory.

For the `TopoLVM` image, read link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-1-dp"]
=== RHSA-2023:3307 - {product-title} 4.13.1 bug fix and security update

Issued: 2023-05-30

{product-title} release 4.13.1, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:3307[RHBA-2023:3307] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:3304[RHSA-2023:3304] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-3-dp"]
=== RHSA-2023:3540 - {product-title} 4.13.3 bug fix and security update

Issued: 2023-06-13

{product-title} release 4.13.3, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHSA-2023:3540[RHSA-2023:3540] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:3537[RHSA-2023:3537] advisory.

[id="microshift-4-13-3-bug-fixes"]
==== Bug Fixes

* Previously, when the operating system was not set to the default route, OVN-Kubernetes caused the cluster to function improperly. With this update, the default routes were removed and the OVN-Kubernetes pod runs as expected. (link:https://issues.redhat.com/browse/OCPBUGS-13548)([*OCPBUGS-13548*])

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-4-dp"]
=== RHBA-2023:3620 - {product-title} 4.13.4 bug fix and security update

Issued: 2023-06-23

{product-title} release 4.13.4, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:3620[RHBA-2023:3620] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:3614[RHSA-2023:3614] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-5-dp"]
=== RHBA-2023:3620 - {product-title} 4.13.5 bug fix and security update

Issued: 2023-07-20

{product-title} release 4.13.5, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4094[RHBA-2023:4094] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:4091[RHSA-2023:4091] advisory.

[id="microshift-4-13-5-bug-fixes"]
==== Bug Fixes

* {product-title} uses the OVN-Kubernetes `local gateway` mode. All pod egress traffic goes through the host kernel before entering or leaving the host. With this release, the flag `externalGatewayInterface` to specify a second gateway interface is removed.(link:https://issues.redhat.com/browse/OCPBUGS-14880)([*OCPBUGS-14880*])

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-6-dp"]
=== RHBA-2023:4428 - {product-title} 4.13.6 bug fix and security update

Issued: 2023-07-26

{product-title} release 4.13.6, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4428[RHBA-2023:4428] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:4426[RHSA-2023:4426] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-8-dp"]
=== RHBA-2023:4458 - {product-title} 4.13.8 bug fix and security update

Issued: 2023-08-08

{product-title} release 4.13.8, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4458[RHBA-2023:4458] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:4456[RHSA-2023:4456] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-9-dp"]
=== RHBA-2023:4605 - {product-title} 4.13.9 bug fix and security update

Issued: 2023-08-16

{product-title} release 4.13.9, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4605[RHBA-2023:4605] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:4603[RHSA-2023:4603] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-10-dp"]
=== RHBA-2023:4733 - {product-title} 4.13.10 bug fix and security update

Issued: 2023-08-30

{product-title} release 4.13.10, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4733[RHBA-2023:4733] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:4731[RHSA-2023:4731] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-11-dp"]
=== RHBA-2023:4733 - {product-title} 4.13.11 bug fix update

Issued: 2023-09-05

{product-title} release 4.13.11 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:4907[RHBA-2023:4907] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHBA-2023:4905[RHBA-2023:4905] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-12-dp"]
=== RHBA-2023:5013 - {product-title} 4.13.12 bug fix update

Issued: 2023-09-12

{product-title} release 4.13.12 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5013[RHBA-2023:5013] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHBA-2023:5011[RHBA-2023:5011] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-13-dp"]
=== RHBA-2023:5157 - {product-title} 4.13.13 bug fix and security update

Issued: 2023-09-19

{product-title} release 4.13.13 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5157[RHBA-2023:5157] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:5155[RHSA-2023:5155] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-14-dp"]
=== RHBA-2023:5386 - {product-title} 4.13.14 bug fix update

Issued: 2023-10-05

{product-title} release 4.13.14 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5386[RHBA-2023:5386] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHBA-2023:5382[RHBA-2023:5382] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-15-dp"]
=== RHBA-2023:5386 - {product-title} 4.13.15 bug fix update

Issued: 2023-10-10

{product-title} release 4.13.15 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5469[RHBA-2023:5469] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHBA-2023:5467[RHBA-2023:5467] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

//release 4-13-16 was folded into 4-13-17

[id="microshift-4-13-17-dp"]
=== RHBA-2023:5674 - {product-title} 4.13.17 bug fix and security update

Issued: 2023-10-17

{product-title} release 4.13.17, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5674[RHBA-2023:5674] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:5672[RHSA-2023:5672] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-18-dp"]
=== RHBA-2023:5904 - {product-title} 4.13.18 bug fix and security update

Issued: 2023-10-24

{product-title} release 4.13.18, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:5904[RHBA-2023:5904] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:5902[RHSA-2023:5902] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

[id="microshift-4-13-19-dp"]
=== RHBA-2023:6132 - {product-title} 4.13.19 bug fix update and security update

Issued: 2023-10-30

{product-title} release 4.13.19, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:6132[RHBA-2023:6132] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:6130[RHSA-2023:6130] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].

//release 4-13-20 was folded into 4-13-21

[id="microshift-4-13-21-dp"]
=== RHBA-2023:6259 - {product-title} 4.13.21 bug fix and enhancement update

Issued: 2023-11-08

{product-title} release 4.13.21 is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHBA-2023:6259[RHBA-2023:6259] advisory. The images that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2023:6257[RHSA-2023:6257] advisory.

For the `TopoLVM` image, see link:https://catalog.redhat.com/software/containers/lvms4/topolvm-rhel9/63972de3adcb55263891b983?container-tabs=dockerfile[lvms4/topolvm-rhel9].