:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
include::_attributes/attributes-openshift-dedicated.adoc[]
[id="configuring-log-forwarding"]
= Configuring log forwarding
:context: configuring-log-forwarding

toc::[]

By default, the {logging} sends container and infrastructure logs to the default internal log store defined in the `ClusterLogging` custom resource. However, it does not send audit logs to the internal store because it does not provide secure storage. If this default configuration meets your needs, you do not need to configure the Cluster Log Forwarder.

[NOTE]
====
To send audit logs to the internal Elasticsearch log store, use the Cluster Log Forwarder as described in xref:../../logging/log_storage/logging-config-es-store.adoc#cluster-logging-elasticsearch-audit_logging-config-es-store[Forwarding audit logs to the log store].
====

include::modules/cluster-logging-collector-log-forwarding-about.adoc[leveloffset=+1]

include::modules/logging-create-clf.adoc[leveloffset=+1]

include::modules/logging-multiline-except.adoc[leveloffset=+1]

ifndef::openshift-rosa[]
include::modules/cluster-logging-collector-log-forward-gcp.adoc[leveloffset=+1]
endif::openshift-rosa[]

include::modules/logging-forward-splunk.adoc[leveloffset=+1]

include::modules/logging-http-forward.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-project.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-logs-from-application-pods.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-loki.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* link:https://grafana.com/docs/loki/latest/configuration/[Configuring Loki server]

include::modules/cluster-logging-collector-log-forward-es.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-fluentd.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-syslog.adoc[leveloffset=+1]

include::modules/cluster-logging-collector-log-forward-kafka.adoc[leveloffset=+1]

// Cloudwatch docs
include::modules/cluster-logging-collector-log-forward-cloudwatch.adoc[leveloffset=+1]

ifdef::openshift-rosa[]
include::modules/rosa-cluster-logging-collector-log-forward-sts-cloudwatch.adoc[leveloffset=+1]
endif::[]

ifdef::openshift-enterprise,openshift-origin,openshift-dedicated[]
include::modules/cluster-logging-collector-log-forward-sts-cloudwatch.adoc[leveloffset=+1]
endif::[]

[id="configuring-log-forwarding-cloudwatch-secret"]
== Creating a secret for AWS CloudWatch with an existing AWS role

If you have an existing role for AWS, you can create a secret for AWS with STS using the `oc create secret --from-literal` command:

[source,terminal]
----
$ oc create secret generic cw-sts-secret -n openshift-logging --from-literal=role_arn=arn:aws:iam::123456789012:role/my-role_with-permissions
----

.Example Secret
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  namespace: openshift-logging
  name: my-secret-name
stringData:
  role_arn: arn:aws:iam::123456789012:role/my-role_with-permissions
----

[role="_additional-resources"]
.Additional resources
* link:https://docs.aws.amazon.com/STS/latest/APIReference/welcome.html[AWS STS API Reference]
