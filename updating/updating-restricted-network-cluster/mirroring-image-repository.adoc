:_content-type: ASSEMBLY
[id="mirroring-ocp-image-repository"]
= Mirroring the {product-title} image repository
include::_attributes/common-attributes.adoc[]
:context: mirroring-ocp-image-repository

toc::[]

You must mirror container images onto a mirror registry before you can update a cluster in a disconnected environment. You can also use this procedure in connected environments to ensure your clusters  run only approved container images that have satisfied your organizational controls for external content.

[id="prerequisites_mirroring-ocp-image-repository"]
== Prerequisites

* You must have a container image registry that supports link:https://docs.docker.com/registry/spec/manifest-v2-2[Docker v2-2] in the location that will host the {product-title} cluster, such as Red Hat Quay.

[id="updating-restricted-network-mirror-host"]
== Preparing your mirror host

Before you perform the mirror procedure, you must prepare the host to retrieve content and push it to the remote location.

include::modules/cli-installing-cli.adoc[leveloffset=+2]

// this file doesn't exist, so I'm including the one that should pick up more changes from Clayton's PR - modules/installation-adding-mirror-registry-pull-secret.adoc[leveloffset=+1]

include::modules/installation-adding-registry-pull-secret.adoc[leveloffset=+2]

include::modules/update-mirror-repository.adoc[leveloffset=+1]