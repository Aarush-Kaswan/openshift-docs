:_content-type: PROCEDURE
[id="serverless-ossm-verifying-installation-prerequisites_{context}"]
= Verifying installation prerequisites

Before installing and configuring the {SMProductShortName} integration with {ServerlessProductShortName}, verify that the prerequisites have been met.

.Procedure

. Check for conflicting gateways:
+
.Example command
[source,terminal]
----
$ oc get gateway -A -o jsonpath='{range .items[*]}{@.metadata.namespace}{"/"}{@.metadata.name}{" "}{@.spec.servers}{"\n"}{end}' | column -t
----
+
.Example output
[source,terminal]
----
knative-serving/knative-ingress-gateway  [{"hosts":["*"],"port":{"name":"https","number":443,"protocol":"HTTPS"},"tls":{"credentialName":"wildcard-certs","mode":"SIMPLE"}}]
knative-serving/knative-local-gateway    [{"hosts":["*"],"port":{"name":"http","number":8081,"protocol":"HTTP"}}]
----
+
This command should not return a `Gateway` that binds `port: 443` and `hosts: ["*"]`, except the `Gateways` in `knative-serving` and `Gateways` that are part of another {SMProductShortName} instance.
+
[NOTE]
====
The mesh that {ServerlessProductShortName} is part of must be distinct and preferably reserved only for {ServerlessProductShortName} workloads. That is because additional configuration, such as `Gateways`, might interfere with the {ServerlessProductShortName} gateways `knative-local-gateway` and `knative-ingress-gateway`. {SMProductName} only allows one Gateway to claim a wildcard host binding (`hosts: ["*"]`) on the same port (`port: 443`). If another Gateway is already binding this configuration, a separate mesh has to be created for {ServerlessProductShortName} workloads. 
====

. Check whether {SMProductName} `istio-ingressgateway` is exposed as type `NodePort` or `LoadBalancer`:
+
.Example command
[source,terminal]
----
$ oc get svc -A | grep istio-ingressgateway
----
+
.Example output
[source,terminal]
----
istio-system   istio-ingressgateway  ClusterIP  172.30.46.146 none>   15021/TCP,80/TCP,443/TCP     9m50s
----
+
This command should not return a `Service` object of type `NodePort` or `LoadBalancer`.
+
[NOTE]
====
Cluster external Knative Services are expected to be called via OpenShift Ingress using OpenShift Routes. It is not supported to access {SMProductShortName} directly, such as by exposing the `istio-ingressgateway` using a `Service` object with type `NodePort` or `LoadBalancer`.
====

