// Module included in the following assemblies:
//
// * declarative_clusterconfig/sharding-clusters-across-argo-cd-application-controller-replicas.adoc

:_mod-docs-content-type: PROCEDURE

[id="gitops-argo-cd-dynamic-scaling-in-web-console_{context}"]
= Enabling dynamic scaling of shards in the web console

You can enable dynamic scaling of shards by using the {OCP} web console.

.Prerequisites
* You have access to the cluster with `cluster-admin` privileges.
* You have access to the {OCP} web console.
* You have installed the {gitops-title} Operator on your {OCP} cluster.

.Procedure

. In the *Administator* perspective of the {OCP} web console, go to *Operators* -> *Installed Operators*.

. From the the list of *Installed Operators*, select the {gitops-title} Operator, and then click the *ArgoCD* tab.

. Select the Argo CD instance name for which you want to enable dynamic scaling of shards, for example, `openshift-gitops`.

. Click the *YAML* tab, and then edit and configure the `spec.controller.sharding` properties as follows:
+
.Example Argo CD YAML file with dynamic scaling enabled
[source,yaml]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: openshift-gitops
  namespace: openshift-gitops
spec:
  controller:
    sharding:
      dynamicScalingEnabled: true <1>
      minShards: 1 <2>
      maxShards: 3 <3>
      clustersPerShard: 1 <4>
----
<1> Set `dynamicScalingEnabled` to `true` to enable dynamic scaling.
<2> Set `minShards` to the minimum number of shards that you want to have. The value must be set to `1` or greater.
<3> Set `maxShards` to the maximum number of shards that you want to have. The value must be greater than the value of `minShards`.
<4> Set `clustersPerShard` to the number of clusters that you want to have per shard. The value must be set to `1` or greater.

. Click *Save*.
+
A success notification alert, `openshift-gitops has been updated to version <version>`, appears.
+
[NOTE]
====
If you edit the default `openshift-gitops` instance, the *Managed resource* dialog box is displayed. Click *Save* again to confirm the changes.
====

.Verification

Verify that sharding is enabled by checking the number of pods in the namespace:

. Go to *Workloads* -> *StatefulSets*.

. Select the namespace where the Argo CD instance is deployed from the *Project* drop-down list, for example, `openshift-gitops`.

. Click the name of the `StatefulSet` object that has the name of the Argo CD instance, for example `openshift-gitops-apllication-controller`.

. Click the *Pods* tab, and then verify that the number of pods is equal to or greater than the value of `minShards` that you have set in the Argo CD `YAML` file.

