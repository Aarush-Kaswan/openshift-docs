// Module included in the following assemblies:
//
// * knative-serving/debugging-serverless-applications.adoc

:_content-type: PROCEDURE
[id="serverless-applications-checking-ingress-istio-routing_{context}"]
= Checking Ingress and Istio routing

Sometimes, when Istio is used as an Ingress layer, the Ingress and Istio routing have issues. You can see the details on them by using the OpenShift CLI (`oc`).

.Procedure

. List all Ingress resources and their corresponding labels by running the following command:
+
[source,terminal]
----
$ oc get ingresses.networking.internal.knative.dev -o=custom-columns='NAME:.metadata.name,LABELS:.metadata.labels'
----
+
.Example output
[source,terminal]
----
NAME            LABELS
helloworld-go   map[serving.knative.dev/route:helloworld-go serving.knative.dev/routeNamespace:default serving.knative.dev/service:helloworld-go]
----
+
In this output, labels `serving.knative.dev/route` and `serving.knative.dev/routeNamespace` indicate the `Route` where the Ingress resource resides. Your `Route` and Ingress should be listed.
+
If your Ingress does not exist, the route controller assumes that the `Revision` objects targeted by your `Route` or `Service` object are not ready. Proceed with other debugging procedures to diagnose `Revision` readiness status.

. If your Ingress is listed, examine the `ClusterIngress` object created for your route by running the following command:
+
[source,terminal]
----
$ oc get ingresses.networking.internal.knative.dev <ingress_name> --output yaml
----
+
In the status section of the output, if the condition with `type=Ready` has the status of `True`, then Ingress is working correctly. Otherwise, the output contains error messages.

. If Ingress has the status of `Ready`, then there is a corresponding `VirtualService` object. Verify the configuration of the `VirtualService` object by running the following command:
+
[source,terminal]
----
$ oc get virtualservice -l networking.internal.knative.dev/ingress=<ingress_name> -n <ingress_namespace> --output yaml
----
+
The network configuration in the `VirtualService` object must match that of the `Ingress` and `Route` objects. Because the `VirtualService` object does not expose a `Status` field, you might need to wait for its settings to propagate.
