// Module included in the following assemblies:
//
// * upgrade/upgrade-roxctl.adoc
:_content-type: PROCEDURE
[id="generate-central-database-provisioning-bundle_{context}"]
= Generating Central database provisioning bundle

[role="_abstract"]

Before upgrading Central you must first generate a database provisioning bundle. This bundle is a `tar` archive that has a README file, a few YAML configuration files, and some scripts that aid in the installation process.

.Prerequisites
* You must have an API token with the `Admin` role.
* You must have installed the `roxctl` CLI.

.Procedure
. Set the `ROX_API_TOKEN` and the `ROX_CENTRAL_ADDRESS` environment variables:
+
[source,terminal]
----
$ export ROX_API_TOKEN=<api_token>
----
+
[source,terminal]
----
$ export ROX_CENTRAL_ADDRESS=<address>:<port_number>
----
. Run the `central db generate` command:
+
[source,terminal,subs=attributes+]
----
$ roxctl -e $ROX_CENTRAL_ADDRESS central db generate \
  <cluster_type> \ <1>
  <storage> \ <2>
  --output-dir <bundle_dir> \ <3>
  --central-db-image registry.redhat.io/advanced-cluster-security/rhacs-central-db-rhel8:{rhacs-version}
----
<1> `cluster-type` is the type of your cluster, specify `k8s` for Kubernetes and `openshift` for {ocp}.
<2> For `storage`, specify `hostpath` or `pvc`. If you use `pvc` you can use additional options to specify volume name, size, and storage class. Run `$ roxctl central db generate openshift pvc -h` for more details.
<3> For `bundle-dir` specify the path where you want to save the generated provisioning bundle.

.Next Step
* Use the Central DB provisioning bundle to create additional resources.
