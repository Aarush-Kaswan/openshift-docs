// Module included in the following assemblies:
//
// * operating/manage-network-policies.adoc
:_content-type: PROCEDURE
[id="generate-network-policies-ng20_{context}"]
= Generating network policies in the network graph (2.0 preview)

[role="_abstract"]
{product-title-short} lets you automatically generate network policies based on the actual observed network communication flows in your environment.

You can generate network policies from the network graph.

The generated policies apply to the deployments shown in the network graph and they allow all network traffic observed during the selected time.

.Procedure
. In the {product-title-short} portal, navigate to *Network Graph (2.0 preview)*.
. Select a cluster, and then select one or more namespaces.
. In the network graph header, select *Simulate network policy*.
. Optional: If you want to generate policies for only some deployments, use the *Filter deployments* field to add criteria by which to filter deployments.
If you do not add a filter, {product-title-short} generates policies for all deployments that you have selected in the cluster.
. Select an appropriate time from the drop-down list next to *Active traffic*.
If the selected time is too short, it leaves out periodic or infrequent network communications.
. Select *Simulate network policy*.
. Optional: In the information panel that opens, select *Exclude ports & protocols* if you do not want ports and protocols to be scoped in {product-title-short} generated policies.
. Select *Generate and simulate network policies*.
The generated network policy configuration YAML file opens in the same panel, and the network graph shows the effects of the policies.
+
[WARNING]
====
Directly applying network policies might cause problems for running applications.
Always download and test the network policies in a development environment or test clusters before applying them to production workloads.
====