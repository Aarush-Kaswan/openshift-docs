// Module included in the following assemblies:
//
// * upgrading/upgrade-operator.adoc
// * cloud_service/upgrade-cloudsvc-operator.adoc
:_mod-docs-content-type: REFERENCE
[id="operator-upgrade-fail-to-deploy_{context}"]
= Central or Secured cluster fails to deploy

ifeval::["{context}" == "upgrade-cloudsvc-operator"]
:cloud-svc:
endif::[]

[role="_abstract"]
When {product-title-short} Operator has the following conditions, you must check the custom resource conditions to find the issue:

ifndef::cloud-svc[]
* If the Operator fails to deploy Central or Secured Cluster
endif::cloud-svc[]
ifdef::cloud-svc[]
* If the Operator fails to deploy Secured Cluster
endif::cloud-svc[]
* If the Operator fails to apply CR changes to actual resources

ifndef::cloud-svc[]
* For Central, run the following command to check the conditions:
+
[source,terminal]
----
$ oc -n rhacs-operator describe centrals.platform.stackrox.io <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.
endif::cloud-svc[]
* For Secured clusters, run the following command to check the conditions:
+
[source,terminal]
----
$ oc -n rhacs-operator describe securedclusters.platform.stackrox.io <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.

You can identify configuration errors from the conditions output:

.Example output
[source,terminal]
----
 Conditions:
    Last Transition Time:  2023-04-19T10:49:57Z
    Status:                False
    Type:                  Deployed
    Last Transition Time:  2023-04-19T10:49:57Z
    Status:                True
    Type:                  Initialized
    Last Transition Time:  2023-04-19T10:59:10Z
    Message:               Deployment.apps "central" is invalid: spec.template.spec.containers[0].resources.requests: Invalid value: "50": must be less than or equal to cpu limit
    Reason:                ReconcileError
    Status:                True
    Type:                  Irreconcilable
    Last Transition Time:  2023-04-19T10:49:57Z
    Message:               No proxy configuration is desired
    Reason:                NoProxyConfig
    Status:                False
    Type:                  ProxyConfigFailed
    Last Transition Time:  2023-04-19T10:49:57Z
    Message:               Deployment.apps "central" is invalid: spec.template.spec.containers[0].resources.requests: Invalid value: "50": must be less than or equal to cpu limit
    Reason:                InstallError
    Status:                True
    Type:                  ReleaseFailed
----

Additionally, you can view {product-title-short} pod logs to find more information about the issue. Run the following command to view the logs:

[source,terminal]
----
oc -n rhacs-operator logs deploy/rhacs-operator-controller-manager manager <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.

ifeval::["{context}" == "upgrade-cloudsvc-operator"]
:!cloud-svc:
endif::[]