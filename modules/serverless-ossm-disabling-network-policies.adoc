// Module included in the following assemblies:
//
// * /serverless/integrations/serverless-ossm-setup.adoc

:_content-type: PROCEDURE
[id="serverless-ossm-disabling-network-policies_{context}"]
= Disabling the default network policies 

The {ServerlessOperatorName} generates the network policies by default. To disable the default network policy generation, you can add the `serverless.openshift.io/disable-istio-net-policies-generation` annotation in the `KnativeEventing` and `KnativeServing` custom resources (CRs).

.Prerequisites

* You have one of the following permissions to access the cluster: 
** Cluster administrator permissions on {ocp-product-title}
** Cluster administrator permissions on {rosa-product-title}
** Dedicated administrator permissions on {dedicated-product-title}
* You have installed the OpenShift CLI (`oc`).
* You have access to a project with the appropriate roles and permissions to create applications and other workloads.
* You have installed the {ServerlessOperatorName}, Knative Serving, and Knative Eventing on your cluster.
* You have installed {SMProductName} with the mTLS functionality enabled.

.Procedure

* Add the `serverless.openshift.io/disable-istio-net-policies-generation: "true"` annotation to your Knative custom resources.
+
[NOTE]
====
The {ServerlessOperatorName} generates the required network policies by default. When you configure `ServiceMeshControlPlane` with `manageNetworkPolicy: false`, you must disable the default network policy generation to ensure proper event delivery. To disable the default network policy generation, you can add the `serverless.openshift.io/disable-istio-net-policies-generation` annotation in the `KnativeEventing` and `KnativeServing` custom resources (CRs).
====

.. Annotate the `KnativeEventing` CR by running the following command:
+
[source,terminal]
----
$ oc edit KnativeEventing -n knative-eventing
----
+
.Example `KnativeEventing` CR
[source,yaml]
----
apiVersion: operator.knative.dev/v1beta1
kind: KnativeEventing
metadata:
  name: knative-eventing
  namespace: knative-eventing
  annotations:
    serverless.openshift.io/disable-istio-net-policies-generation: "true"
----

.. Annotate the `KnativeServing` CR by running the following command:
+
[source,terminal]
----
$ oc edit KnativeServing -n knative-serving
----
+
.Example `KnativeServing` CR
[source,yaml]
----
apiVersion: operator.knative.dev/v1beta1
kind: KnativeServing
metadata:
  name: knative-serving
  namespace: knative-serving
  annotations:
    serverless.openshift.io/disable-istio-net-policies-generation: "true"
----

