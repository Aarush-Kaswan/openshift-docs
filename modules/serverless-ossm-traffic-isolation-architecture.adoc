:_content-type: CONCEPT
[id="serverless-ossm-traffic-isolation-architecture_context"]
= High-level architecture

The high-level architecture of {ServerlessProductShortName} traffic isolation provided by {SMProductShortName} consists of `AuthorizationPolicy` objects in the `knative-serving`, `knative-eventing`, and the tenants' namespaces, with all the components being part of the {SMProductShortName}. The injected {SMProductShortName} sidecars enforce those rules to isolate network traffic between tenants.

// [id="serverless-ossm-traffic-isolation-architecture-serving"]
// == Knative Serving

// Knative Serving adheres to the following architecture:

// image::multi-tenancy-service-mesh-serving.png[Knative Serving architecture]

// The following relationships apply:

// . Workloads in project `tenant-2` cannot call workloads in project `tenant-1` directly. Requests are rejected in the Istio proxies of `tenant-1` workloads.

// . Workloads in project `tenant-2` cannot call workloads in project `tenant-1` through ingress gateway. Requests are rejected in the Istio proxies of `tenant-1` workloads.

// . Workloads in project `tenant-2` cannot call workloads in project `tenant-1` through activator. Requests are rejected in the Istio proxy of the activator component. Because ingress gateways are allowed to call the activator, this includes requests from project `tenant-2` through ingress gateway to the activator.

// . `AuthorizationPolicy` objects are applied in this project.

// [id="serverless-ossm-traffic-isolation-architecture-eventing"]
// == Knative Eventing

// Knative Eventing adheres to the following architecture:

// image::multi-tenancy-service-mesh-eventing.png[Knative Eventing architecture]

// The following relationships apply:

// . Workloads in `tenant-1` project can send events to Eventing brokers, channels, and sinks endpoints in the `tenant-1` project.

// . Eventing sources, triggers, and subscriptions in project `tenant-1` can send events to workloads in the `tenant-1` project.

// . Workloads in the `tenant-1` project cannot send events to Eventing brokers, channels, and sinks endpoints in the `tenant-2` project.

// . Eventing sources, triggers, and subscriptions in the `tenant-2` project cannot send events to workloads in `tenant-1` project.

// . Workloads in the `tenant-1` project cannot call workloads in the `tenant-2` project as well as workloads in the `tenant-2` project cannot call workloads in the `tenant-1` project.

// . `AuthorizationPolicy` objects are applied in this project.
